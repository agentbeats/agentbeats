import { defaultCoordinates } from '../../utilities/index.js';
import { subtract } from '@dnd-kit-svelte/utilities';
import { untrack } from 'svelte';
export function useScrollOffsetsDelta(args) {
    const [scrollOffsets, dependencies] = $derived(args());
    let initialScrollOffsets = $state(null);
    $effect(() => {
        void dependencies; // trigger re-run
        initialScrollOffsets = null;
    });
    $effect(() => {
        const hasScrollOffsets = scrollOffsets !== defaultCoordinates;
        if (hasScrollOffsets && !untrack(() => initialScrollOffsets)) {
            initialScrollOffsets = scrollOffsets;
        }
        if (!hasScrollOffsets && untrack(() => initialScrollOffsets)) {
            initialScrollOffsets = null;
        }
    });
    return {
        get current() {
            return initialScrollOffsets ? subtract(scrollOffsets, initialScrollOffsets) : defaultCoordinates;
        },
    };
}
