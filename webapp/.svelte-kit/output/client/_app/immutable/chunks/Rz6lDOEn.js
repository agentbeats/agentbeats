var C=r=>{throw TypeError(r)};var E=(r,t,e)=>t.has(r)||C("Cannot "+e);var a=(r,t,e)=>(E(r,t,"read from private field"),e?e.call(r):t.get(r)),f=(r,t,e)=>t.has(r)?C("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),T=(r,t,e,s)=>(E(r,t,"write to private field"),s?s.call(r,e):t.set(r,e),e),m=(r,t,e)=>(E(r,t,"access private method"),e);import{g as j,u as k,i as v,o as A,j as H}from"./D_E79TID.js";import{w as R,e as I}from"./_F7RrdPt.js";import{b as L,g as N,a as q,i as B,c as F}from"./1q5JTXAK.js";var y,b,x,u,h,G,M;class U{constructor(t){f(this,h);f(this,y);f(this,b);f(this,x);f(this,u,j(null));T(this,y,t),T(this,b,k(()=>a(this,y).enabled())),T(this,x,L(!1,{afterMs:t.transitTimeout??300,onChange:e=>{var s,n;v(a(this,b))&&((n=(s=a(this,y)).setIsPointerInTransit)==null||n.call(s,e))},getWindow:()=>N(a(this,y).triggerNode())})),R([t.triggerNode,t.contentNode,t.enabled],([e,s,n])=>{if(!e||!s||!n)return;const c=l=>{m(this,h,M).call(this,l,s)},o=l=>{m(this,h,M).call(this,l,e)};return I(A(e,"pointerleave",c),A(s,"pointerleave",o))}),R(()=>v(a(this,u)),()=>{const e=n=>{var w,g;if(!v(a(this,u)))return;const c=n.target;if(!B(c))return;const o={x:n.clientX,y:n.clientY},l=((w=t.triggerNode())==null?void 0:w.contains(c))||((g=t.contentNode())==null?void 0:g.contains(c)),i=!Y(o,v(a(this,u)));l?m(this,h,G).call(this):i&&(m(this,h,G).call(this),t.onPointerExit())},s=q(t.triggerNode()??t.contentNode());if(s)return A(s,"pointermove",e)})}}y=new WeakMap,b=new WeakMap,x=new WeakMap,u=new WeakMap,h=new WeakSet,G=function(){H(a(this,u),null),a(this,x).current=!1},M=function(t,e){const s=t.currentTarget;if(!F(s))return;const n={x:t.clientX,y:t.clientY},c=S(n,s.getBoundingClientRect()),o=W(n,c),l=X(e.getBoundingClientRect()),i=D([...o,...l]);H(a(this,u),i,!0),a(this,x).current=!0};function S(r,t){const e=Math.abs(t.top-r.y),s=Math.abs(t.bottom-r.y),n=Math.abs(t.right-r.x),c=Math.abs(t.left-r.x);switch(Math.min(e,s,n,c)){case c:return"left";case n:return"right";case e:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function W(r,t,e=5){const s=e*1.5;switch(t){case"top":return[{x:r.x-e,y:r.y+e},{x:r.x,y:r.y-s},{x:r.x+e,y:r.y+e}];case"bottom":return[{x:r.x-e,y:r.y-e},{x:r.x,y:r.y+s},{x:r.x+e,y:r.y-e}];case"left":return[{x:r.x+e,y:r.y-e},{x:r.x-s,y:r.y},{x:r.x+e,y:r.y+e}];case"right":return[{x:r.x-e,y:r.y-e},{x:r.x+s,y:r.y},{x:r.x-e,y:r.y+e}]}}function X(r){const{top:t,right:e,bottom:s,left:n}=r;return[{x:n,y:t},{x:e,y:t},{x:e,y:s},{x:n,y:s}]}function Y(r,t){const{x:e,y:s}=r;let n=!1;for(let c=0,o=t.length-1;c<t.length;o=c++){const l=t[c].x,i=t[c].y,w=t[o].x,g=t[o].y;i>s!=g>s&&e<(w-l)*(s-i)/(g-i)+l&&(n=!n)}return n}function D(r){const t=r.slice();return t.sort((e,s)=>e.x<s.x?-1:e.x>s.x?1:e.y<s.y?-1:e.y>s.y?1:0),O(t)}function O(r){if(r.length<=1)return r.slice();const t=[];for(let s=0;s<r.length;s++){const n=r[s];for(;t.length>=2;){const c=t[t.length-1],o=t[t.length-2];if((c.x-o.x)*(n.y-o.y)>=(c.y-o.y)*(n.x-o.x))t.pop();else break}t.push(n)}t.pop();const e=[];for(let s=r.length-1;s>=0;s--){const n=r[s];for(;e.length>=2;){const c=e[e.length-1],o=e[e.length-2];if((c.x-o.x)*(n.y-o.y)>=(c.y-o.y)*(n.x-o.x))e.pop();else break}e.push(n)}return e.pop(),t.length===1&&e.length===1&&t[0].x===e[0].x&&t[0].y===e[0].y?t:t.concat(e)}export{U as G};
