import"../chunks/CWj6FrbW.js";import{i as Se}from"../chunks/_pPX3X5k.js";import{o as Ae,a as Be}from"../chunks/B-G1-8zH.js";import{aF as He,aX as Oe,p as Ue,v as Re,i as v,m as ee,j as s,w as We,f as i,d as L,n as F,t as I,a as e,s as t,l as De,c as a,r,x as oe,k as pe,q as te,e as Q,b as Le}from"../chunks/D_E79TID.js";import{a as Pe,i as M,s as Fe}from"../chunks/D0mllNP8.js";import{g as le}from"../chunks/BXNnu7_f.js";import{u as qe,r as Ge}from"../chunks/tc0rB4gA.js";import{u as Ne,e as Qe,s as Ve,l as Xe,a as ze}from"../chunks/CRPrjd5f.js";import{C as ye,a as xe,b as he,c as we}from"../chunks/B6GxE72l.js";import{C as Ie}from"../chunks/CDE7rHBv.js";import{I as $e}from"../chunks/D5HnK-cA.js";import{L as be}from"../chunks/2xnkTWfy.js";function Je(J,V,K){var ae=He(J,V);ae&&ae.set&&(J[V]=K,Oe(()=>{J[V]=null}))}var Ke=i("<!> <!>",1),Te=i('<div class="flex justify-between items-center"><div><p class="text-sm font-medium">Name</p> <p class="text-sm text-gray-600"> </p></div></div>'),Ye=i('<div class="space-y-3"><div class="flex justify-between items-center"><div><p class="text-sm font-medium">Email</p> <p class="text-sm text-gray-600"> </p></div></div> <!> <div class="flex justify-between items-center"><div><p class="text-sm font-medium">Provider</p> <p class="text-sm text-gray-600"> </p></div></div> <div class="flex justify-between items-center"><div><p class="text-sm font-medium">Member Since</p> <p class="text-sm text-gray-600"> </p></div></div> <div class="flex gap-2 pt-2"><button class="px-3 py-1 bg-primary text-primary-foreground text-sm rounded-md hover:bg-primary/90">Edit Profile</button> <button class="px-3 py-1 bg-secondary text-secondary-foreground text-sm rounded-md hover:bg-secondary/80">Reset Password</button></div></div>'),Ze=i('<div class="space-y-2"><!> <!></div>'),et=i('<div class="space-y-4"><div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <!> <div class="flex gap-2"><button class="px-3 py-1 bg-primary text-primary-foreground text-sm rounded-md hover:bg-primary/90">Save Changes</button> <button class="px-3 py-1 bg-secondary text-secondary-foreground text-sm rounded-md hover:bg-secondary/80">Cancel</button></div></div>'),tt=i('<div class="text-red-600 text-sm"> </div>'),at=i('<div class="text-green-600 text-sm"> </div>'),rt=i('<div class="space-y-4"><!> <!> <!></div>'),st=i('<div class="text-center text-gray-600"><p>No user data available</p></div>'),ot=i("<!> <!>",1);function lt(J,V){Ue(V,!1);const[K,ae]=Fe(),d=()=>Pe(Ne,"$user",K),A=()=>Pe(Qe,"$authError",K);let B=ee(!1),N=ee(""),P=ee(""),H=ee(""),X=ee(""),f=ee(""),O=ee("");async function ke(){var p,y,S;if(s(f,""),s(O,""),v(P)&&v(P)!==v(H)){s(f,"Passwords do not match.");return}try{const x={};if(v(N)!==((p=d())==null?void 0:p.email)&&(x.email=v(N)),v(P)&&(x.password=v(P)),v(X)!==((S=(y=d())==null?void 0:y.user_metadata)==null?void 0:S.name)&&(x.data={name:v(X)}),Object.keys(x).length===0){s(f,"No changes to save.");return}await qe(x)?(s(O,"Profile updated successfully!"),s(B,!1),s(P,""),s(H,"")):s(f,"Failed to update profile. Please try again.")}catch(x){s(f,"Failed to update profile. Please try again."),console.error("Update profile error:",x)}}async function b(){var p;if(s(f,""),s(O,""),!((p=d())!=null&&p.email)){s(f,"No email address available for password reset.");return}try{await Ge(d().email)?s(O,"Password reset email sent! Check your inbox."):s(f,"Failed to send password reset email. Please try again.")}catch(y){s(f,"Failed to send password reset email. Please try again."),console.error("Password reset error:",y)}}function R(){var p,y,S;s(B,!1),s(N,((p=d())==null?void 0:p.email)||""),s(X,((S=(y=d())==null?void 0:y.user_metadata)==null?void 0:S.name)||""),s(P,""),s(H,""),s(f,""),s(O,"")}Re(()=>(d(),v(B)),()=>{var p;d()&&!v(B)&&(s(N,d().email||""),s(X,((p=d().user_metadata)==null?void 0:p.name)||""))}),We(),Se(),ye(J,{children:(p,y)=>{var S=ot(),x=L(S);xe(x,{children:(re,de)=>{var T=Ke(),se=L(T);he(se,{children:(z,k)=>{F();var C=I("User Profile");e(z,C)},$$slots:{default:!0}});var ie=t(se,2);Ie(ie,{children:(z,k)=>{F();var C=I("Manage your account settings and preferences");e(z,C)},$$slots:{default:!0}}),e(re,T)},$$slots:{default:!0}});var fe=t(x,2);we(fe,{class:"space-y-4",children:(re,de)=>{var T=De(),se=L(T);{var ie=k=>{var C=rt(),c=a(C);{var E=l=>{var o=Ye(),n=a(o),w=a(n),m=t(a(w),2),j=a(m,!0);r(m),r(w),r(n);var q=t(n,2);{var Ce=Z=>{var $=Te(),je=a($),ge=t(a(je),2),Me=a(ge,!0);r(ge),r(je),r($),pe(()=>te(Me,(d(),oe(()=>d().user_metadata.name)))),e(Z,$)};M(q,Z=>{d(),oe(()=>{var $;return($=d().user_metadata)==null?void 0:$.name})&&Z(Ce)})}var Y=t(q,2),ne=a(Y),me=t(a(ne),2),_e=a(me,!0);r(me),r(ne),r(Y);var ve=t(Y,2),ce=a(ve),ue=t(a(ce),2),Ee=a(ue,!0);r(ue),r(ce),r(ve);var u=t(ve,2),G=a(u),D=t(G,2);r(u),r(o),pe(Z=>{te(j,(d(),oe(()=>d().email))),te(_e,(d(),oe(()=>{var $;return(($=d().app_metadata)==null?void 0:$.provider)||"Email"}))),te(Ee,Z)},[()=>(d(),oe(()=>new Date(d().created_at).toLocaleDateString()))]),Q("click",G,()=>s(B,!0)),Q("click",D,b),e(l,o)},h=l=>{var o=et(),n=a(o),w=a(n);be(w,{for:"edit-email",children:(u,G)=>{F();var D=I("Email");e(u,D)},$$slots:{default:!0}});var m=t(w,2);$e(m,{id:"edit-email",type:"email",placeholder:"Enter your email",get value(){return v(N)},set value(u){s(N,u)},$$legacy:!0}),r(n);var j=t(n,2),q=a(j);be(q,{for:"edit-name",children:(u,G)=>{F();var D=I("Name");e(u,D)},$$slots:{default:!0}});var Ce=t(q,2);$e(Ce,{id:"edit-name",type:"text",placeholder:"Enter your name",get value(){return v(X)},set value(u){s(X,u)},$$legacy:!0}),r(j);var Y=t(j,2),ne=a(Y);be(ne,{for:"edit-password",children:(u,G)=>{F();var D=I("New Password (optional)");e(u,D)},$$slots:{default:!0}});var me=t(ne,2);$e(me,{id:"edit-password",type:"password",placeholder:"Enter new password",get value(){return v(P)},set value(u){s(P,u)},$$legacy:!0}),r(Y);var _e=t(Y,2);{var ve=u=>{var G=Ze(),D=a(G);be(D,{for:"edit-confirm-password",children:($,je)=>{F();var ge=I("Confirm New Password");e($,ge)},$$slots:{default:!0}});var Z=t(D,2);$e(Z,{id:"edit-confirm-password",type:"password",placeholder:"Confirm new password",get value(){return v(H)},set value($){s(H,$)},$$legacy:!0}),r(G),e(u,G)};M(_e,u=>{v(P)&&u(ve)})}var ce=t(_e,2),ue=a(ce),Ee=t(ue,2);r(ce),r(o),Q("click",ue,ke),Q("click",Ee,R),e(l,o)};M(c,l=>{v(B)?l(h,!1):l(E)})}var g=t(c,2);{var U=l=>{var o=tt(),n=a(o,!0);r(o),pe(()=>te(n,(v(f),A(),oe(()=>{var w;return v(f)||((w=A())==null?void 0:w.message)})))),e(l,o)};M(g,l=>{(v(f)||A())&&l(U)})}var _=t(g,2);{var W=l=>{var o=at(),n=a(o,!0);r(o),pe(()=>te(n,v(O))),e(l,o)};M(_,l=>{v(O)&&l(W)})}r(C),e(k,C)},z=k=>{var C=st();e(k,C)};M(se,k=>{d()?k(ie):k(z,!1)})}e(re,T)},$$slots:{default:!0}}),e(p,S)},$$slots:{default:!0}}),Le(),ae()}var dt=i('<div class="flex items-center justify-center h-64"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <span class="ml-2">Loading...</span></div>'),it=i('<span class="text-sm text-gray-600"> </span> <button class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">Logout</button>',1),nt=i('<button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors">Sign In</button>'),vt=i("<!> <!>",1),ct=i('<button class="w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors">Sign In to Continue!</button>'),ut=i("<!> <!>",1),pt=i(`<p class="text-muted-foreground">Here's your dashboard! Here, you'll see your battle history, agents, and ranking (do later).</p>`),ft=i('<p class="text-muted-foreground">Sign in to start battling AI agents, track your performance, and climb the leaderboard.</p>'),mt=i("<!> <!>",1),_t=i('<button class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">Manage Agents</button> <button class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors">View Battles</button>',1),gt=i("<!> <!>",1),$t=i('<div class="w-full max-w-6xl mx-auto"><div class="flex justify-between items-center mb-6"><h2 class="text-2xl font-bold">Dashboard</h2> <div class="flex items-center gap-4"><!></div></div> <div class="grid grid-cols-1 lg:grid-cols-3 gap-6"><div class="lg:col-span-1"><!></div> <div class="lg:col-span-2 space-y-6"><!> <!></div></div></div>'),bt=i('<main class="flex-1 p-6 flex flex-col items-center justify-start"><!></main>');function Dt(J,V){Ue(V,!1);const[K,ae]=Fe(),d=()=>Pe(Xe,"$loading",K),A=()=>Pe(Ne,"$user",K),B="Dashboard";let N=null;Ae(async()=>{const{data:{session:b}}=await Ve.auth.getSession();if(!b){console.log("Dashboard page: No session found, redirecting to login"),le("/login");return}N=Ne.subscribe(R=>{!R&&!d()&&(console.log("Dashboard page: User logged out, redirecting to login"),le("/login"))})}),Be(()=>{N&&N()});async function P(){try{await ze()}catch(b){console.error("Logout error:",b)}}Se();var H=bt(),X=a(H);{var f=b=>{var R=dt();e(b,R)},O=b=>{var R=$t(),p=a(R),y=t(a(p),2),S=a(y);{var x=c=>{var E=it(),h=L(E),g=a(h);r(h);var U=t(h,2);pe(()=>{var _;return te(g,`Welcome, ${(((_=A().user_metadata)==null?void 0:_.name)||A().email)??""}`)}),Q("click",U,P),e(c,E)},fe=c=>{var E=nt();Q("click",E,()=>le("/login")),e(c,E)};M(S,c=>{A()?c(x):c(fe,!1)})}r(y),r(p);var re=t(p,2),de=a(re),T=a(de);{var se=c=>{lt(c,{})},ie=c=>{ye(c,{children:(E,h)=>{var g=ut(),U=L(g);xe(U,{children:(W,l)=>{var o=vt(),n=L(o);he(n,{children:(m,j)=>{F();var q=I("Get Started");e(m,q)},$$slots:{default:!0}});var w=t(n,2);Ie(w,{children:(m,j)=>{F();var q=I("Sign in to access your profile and battle stats!");e(m,q)},$$slots:{default:!0}}),e(W,o)},$$slots:{default:!0}});var _=t(U,2);we(_,{children:(W,l)=>{var o=ct();Q("click",o,()=>le("/login")),e(W,o)},$$slots:{default:!0}}),e(E,g)},$$slots:{default:!0}})};M(T,c=>{A()?c(se):c(ie,!1)})}r(de);var z=t(de,2),k=a(z);ye(k,{children:(c,E)=>{var h=mt(),g=L(h);xe(g,{children:(_,W)=>{he(_,{children:(l,o)=>{F();var n=I("Welcome to AgentBeats!");e(l,n)},$$slots:{default:!0}})},$$slots:{default:!0}});var U=t(g,2);we(U,{children:(_,W)=>{var l=De(),o=L(l);{var n=m=>{var j=pt();e(m,j)},w=m=>{var j=ft();e(m,j)};M(o,m=>{A()?m(n):m(w,!1)})}e(_,l)},$$slots:{default:!0}}),e(c,h)},$$slots:{default:!0}});var C=t(k,2);ye(C,{children:(c,E)=>{var h=gt(),g=L(h);xe(g,{children:(_,W)=>{he(_,{children:(l,o)=>{F();var n=I("Quick Actions");e(l,n)},$$slots:{default:!0}})},$$slots:{default:!0}});var U=t(g,2);we(U,{class:"grid grid-cols-2 gap-4",children:(_,W)=>{var l=_t(),o=L(l),n=t(o,2);Q("click",o,()=>le("/agents")),Q("click",n,()=>le("/battles")),e(_,l)},$$slots:{default:!0}}),e(c,h)},$$slots:{default:!0}}),r(z),r(re),r(R),e(b,R)};M(X,b=>{d()?b(f):b(O,!1)})}r(H),e(J,H),Je(V,"title",B);var ke=Le({title:B});return ae(),ke}export{Dt as component};
