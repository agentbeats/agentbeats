import { distanceBetween } from '../coordinates/index.js';
import { cornersOfRectangle, sortCollisionsAsc } from './helpers.js';
/**
 * Returns the closest rectangles from an array of rectangles to the corners of
 * another rectangle.
 */
export const closestCorners = ({ collisionRect, droppableRects, droppableContainers }) => {
    const corners = cornersOfRectangle(collisionRect);
    const collisions = [];
    for (const droppableContainer of droppableContainers) {
        const { id } = droppableContainer;
        const rect = droppableRects.get(id);
        if (rect) {
            const rectCorners = cornersOfRectangle(rect);
            const distances = corners.reduce((accumulator, corner, index) => {
                return accumulator + distanceBetween(rectCorners[index], corner);
            }, 0);
            const effectiveDistance = Number((distances / 4).toFixed(4));
            collisions.push({
                id,
                data: { droppableContainer, value: effectiveDistance },
            });
        }
    }
    return collisions.sort(sortCollisionsAsc);
};
